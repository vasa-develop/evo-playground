(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[373],{53585:function(e,t,s){Promise.resolve().then(s.bind(s,82894))},82894:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return MuZeroDemo}});var a=s(57437),n=s(2265),i=s(15502),o=s(26823),l=s(15932),components_CartPoleVisualizer=e=>{let{state:t={cart_position:0,cart_velocity:0,pole_angle:0,pole_velocity:0}}=e,s=(0,n.useRef)(null),i=(0,n.useCallback)(e=>{let s=e.canvas.width,a=e.canvas.height;e.clearRect(0,0,s,a);let n=a-30-10,i="number"==typeof(null==t?void 0:t.cart_position)?t.cart_position:0,o="number"==typeof(null==t?void 0:t.pole_angle)?t.pole_angle:0,l=s/2+50*i;e.beginPath(),e.moveTo(0,n+30),e.lineTo(s,n+30),e.strokeStyle="#666",e.stroke(),e.fillStyle="#4A5568",e.fillRect(l-25,n,50,30),e.beginPath(),e.moveTo(l,n);let r=l+100*Math.sin(o),c=n-100*Math.cos(o);e.lineTo(r,c),e.strokeStyle="#2D3748",e.lineWidth=6,e.stroke(),e.beginPath(),e.arc(l,n,5,0,2*Math.PI),e.fillStyle="#2D3748",e.fill()},[t]);return(0,n.useEffect)(()=>{let e=s.current;if(!e)return;let t=e.getContext("2d");t&&(e.width=600,e.height=400,i(t))},[i]),(0,a.jsx)("div",{className:"w-full flex justify-center",children:(0,a.jsx)("canvas",{ref:s,className:"border border-gray-200 rounded-lg shadow-sm"})})};let r="https://muzero-backend-yaulseqd.fly.dev",LunarLanderDemo=()=>(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("p",{className:"text-gray-700",children:"LunarLander Environment Demo (Coming Soon)"})}),CartPoleDemo=()=>{let[e,t]=(0,n.useState)(null),[s,i]=(0,n.useState)({cart_position:0,cart_velocity:0,pole_angle:0,pole_velocity:0,done:!1,reward:0,termination_reason:void 0,suggested_action:void 0}),[o,c]=(0,n.useState)(!1),[d,m]=(0,n.useState)(!1),initializeGame=async()=>{try{let e="session_".concat(Date.now()),s=await fetch("".concat(r,"/game/init?session_id=").concat(e),{method:"POST",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=await s.json();i({cart_position:a.cart_position,cart_velocity:a.cart_velocity,pole_angle:a.pole_angle,pole_velocity:a.pole_velocity,done:a.done,reward:a.reward,suggested_action:a.suggested_action,termination_reason:a.termination_reason}),t(e),c(!0)}catch(e){console.error("Failed to initialize game:",e),i({cart_position:0,cart_velocity:0,pole_angle:0,pole_velocity:0,done:!1,reward:0,suggested_action:void 0,termination_reason:void 0})}},takeAction=async function(s){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&o)try{let n=await fetch("".concat(r,"/game/step/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:s,use_ai:a})}),o=await n.json();i(o),o.done&&(c(!1),t(null))}catch(e){console.error("Failed to take action:",e)}};return(0,n.useEffect)(()=>{let handleKeyPress=e=>{if(o)switch(e.key){case"ArrowLeft":takeAction(0);break;case"ArrowRight":takeAction(1);break;case"a":takeAction(s.suggested_action||0,!0)}};return window.addEventListener("keydown",handleKeyPress),()=>window.removeEventListener("keydown",handleKeyPress)},[o,s.suggested_action]),(0,n.useEffect)(()=>{let e;if(o&&d&&!s.done){let t=0,attemptAction=async()=>{try{await takeAction(s.suggested_action||0,!0),t=0}catch(e){console.error("Error in continuous mode:",e),++t<3?console.log("Retrying (".concat(t,"/").concat(3,")...")):(console.error("Max retries reached, stopping continuous mode"),m(!1))}};e=setInterval(attemptAction,100)}return()=>{e&&clearInterval(e)}},[o,d,s.done,s.suggested_action]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"p-4 bg-white rounded-lg shadow-sm",children:(0,a.jsx)(components_CartPoleVisualizer,{state:s})}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Environment State"}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("button",{className:"w-5 h-5 rounded-full bg-slate-200 hover:bg-slate-300 flex items-center justify-center text-slate-600 text-sm","aria-label":"Game Rules",children:"?"}),(0,a.jsx)("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-50",children:(0,a.jsxs)("div",{className:"bg-slate-800 text-white p-4 rounded-lg shadow-lg max-w-sm",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Game Rules"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,a.jsx)("li",{children:"• Game ends if pole tilts beyond \xb112 degrees"}),(0,a.jsx)("li",{children:"• Game ends if cart moves off-screen"}),(0,a.jsx)("li",{children:"• Maximum game length is 200 steps"}),(0,a.jsx)("li",{children:"• Reward equals steps completed"})]})]})})]})]}),(0,a.jsx)("div",{className:"space-x-4",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>takeAction(0),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Left"}),(0,a.jsx)("button",{onClick:()=>takeAction(1),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Right"}),(0,a.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-slate-100 px-4 py-2.5 rounded-lg shadow-sm border border-slate-200",children:[(0,a.jsx)(l.fC,{checked:d,onCheckedChange:m,className:"w-[48px] h-[28px] bg-slate-300 rounded-full relative data-[state=checked]:bg-blue-600 outline-none cursor-pointer border-2 border-slate-400 hover:bg-slate-400 transition-colors",children:(0,a.jsx)(l.bU,{className:"block w-[20px] h-[20px] bg-white rounded-full shadow-lg transform transition-transform duration-200 will-change-transform data-[state=checked]:translate-x-[22px] translate-x-0.5"})}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-slate-700",children:["AI Mode ",d?"On":"Off"]})]}),!d&&(0,a.jsx)("button",{onClick:()=>takeAction(s.suggested_action||0,!0),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:"Use AI Once"})]}):(0,a.jsx)("button",{onClick:initializeGame,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Start Game"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Cart Position"}),(0,a.jsx)("p",{className:"font-mono",children:"number"==typeof(null==s?void 0:s.cart_position)?s.cart_position.toFixed(2):"0.00"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Cart Velocity"}),(0,a.jsx)("p",{className:"font-mono",children:"number"==typeof(null==s?void 0:s.cart_velocity)?s.cart_velocity.toFixed(2):"0.00"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Pole Angle"}),(0,a.jsx)("p",{className:"font-mono",children:"number"==typeof(null==s?void 0:s.pole_angle)?s.pole_angle.toFixed(2):"0.00"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Pole Velocity"}),(0,a.jsx)("p",{className:"font-mono",children:"number"==typeof(null==s?void 0:s.pole_velocity)?s.pole_velocity.toFixed(2):"0.00"})]})]}),s.done&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-red-700 font-medium",children:"Game Over"}),(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:s.termination_reason||"Game ended"}),(0,a.jsxs)("p",{className:"text-sm text-red-600 mt-1",children:["Final score: ",s.reward," steps"]})]}),void 0!==s.suggested_action&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"AI Suggestion"}),(0,a.jsx)("p",{className:"font-mono",children:0===s.suggested_action?"Left":"Right"})]})]})]})};function MuZeroDemo(){return(0,a.jsx)("div",{className:"container mx-auto py-8 px-4",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"MuZero Interactive Demo"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Explore DeepMind's MuZero algorithm through interactive demonstrations in different environments. Watch as the AI learns to balance the pole in real-time."}),(0,a.jsx)(o.Z,{className:"my-4"}),(0,a.jsxs)(i.mQ,{defaultValue:"cartpole",className:"w-full",children:[(0,a.jsxs)(i.dr,{className:"flex h-10 items-center justify-start rounded-md bg-slate-100 p-1",children:[(0,a.jsx)(i.SP,{value:"cartpole",className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-950 data-[state=active]:shadow-sm",children:"CartPole"}),(0,a.jsx)(i.SP,{value:"lunarlander",className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-950 data-[state=active]:shadow-sm",children:"LunarLander"})]}),(0,a.jsx)(i.nU,{value:"cartpole",className:"mt-6",children:(0,a.jsx)(CartPoleDemo,{})}),(0,a.jsx)(i.nU,{value:"lunarlander",className:"mt-6",children:(0,a.jsx)(LunarLanderDemo,{})})]})]})})}}},function(e){e.O(0,[401,971,472,744],function(){return e(e.s=53585)}),_N_E=e.O()}]);